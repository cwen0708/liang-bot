# Trading Configuration
trading:
  mode: "paper"              # "paper" or "live"
  pairs:
    - "BTC/USDT"
    - "ETH/USDT"
    - "LINK/USDT"
    - "AVAX/USDT"
    - "BNB/USDT"
    - "SOL/USDT"
    - "DOGE/USDT"
    - "ADA/USDT"
  timeframe: "1h"            # K 線週期
  check_interval_seconds: 60 # 主迴圈執行間隔（秒）

# Strategy Configuration
strategy:
  name: "sma_crossover"
  params:
    fast_period: 10
    slow_period: 30

# Risk Management
risk:
  max_position_pct: 0.04     # 每筆交易最大部位：總資金 4%
  stop_loss_pct: 0.03        # 停損 3%
  take_profit_pct: 0.06      # 停利 6%（風報比 2:1）
  max_open_positions: 8      # 最大同時持倉數
  max_daily_loss_pct: 0.05   # 每日虧損超過 5% 暫停交易

# Backtest
backtest:
  start_date: "2024-01-01"
  end_date: "2025-01-01"
  initial_balance: 10000     # USDT
  commission_pct: 0.001      # 0.1% 幣安現貨手續費

# Order Flow
orderflow:
  bar_interval_seconds: 60
  tick_size: 0.01
  cvd_lookback: 500
  zscore_lookback: 20
  divergence_peak_order: 5
  sfp_swing_lookback: 5
  absorption_lookback: 10
  signal_threshold: 0.5

# Multi-Strategy（每策略 × 4 時段，統一每 15 分鐘觸發）
strategies:
  # ── SMA Crossover ──
  - name: "sma_crossover"
    timeframe: "15m"
    params: { fast_period: 10, slow_period: 30 }
  - name: "sma_crossover"
    timeframe: "1h"
    params: { fast_period: 10, slow_period: 30 }
  - name: "sma_crossover"
    timeframe: "4h"
    params: { fast_period: 10, slow_period: 30 }
  - name: "sma_crossover"
    timeframe: "1d"
    params: { fast_period: 10, slow_period: 30 }
  # ── RSI Oversold ──
  - name: "rsi_oversold"
    timeframe: "15m"
    params: { period: 14, oversold: 30, overbought: 70 }
  - name: "rsi_oversold"
    timeframe: "1h"
    params: { period: 14, oversold: 30, overbought: 70 }
  - name: "rsi_oversold"
    timeframe: "4h"
    params: { period: 14, oversold: 30, overbought: 70 }
  - name: "rsi_oversold"
    timeframe: "1d"
    params: { period: 14, oversold: 30, overbought: 70 }
  # ── Bollinger Breakout ──
  - name: "bollinger_breakout"
    timeframe: "15m"
    params: { period: 20, std_dev: 2.0 }
  - name: "bollinger_breakout"
    timeframe: "1h"
    params: { period: 20, std_dev: 2.0 }
  - name: "bollinger_breakout"
    timeframe: "4h"
    params: { period: 20, std_dev: 2.0 }
  - name: "bollinger_breakout"
    timeframe: "1d"
    params: { period: 20, std_dev: 2.0 }
  # ── MACD Momentum ──
  - name: "macd_momentum"
    timeframe: "15m"
    params: { fast_period: 12, slow_period: 26, signal_period: 9 }
  - name: "macd_momentum"
    timeframe: "1h"
    params: { fast_period: 12, slow_period: 26, signal_period: 9 }
  - name: "macd_momentum"
    timeframe: "4h"
    params: { fast_period: 12, slow_period: 26, signal_period: 9 }
  - name: "macd_momentum"
    timeframe: "1d"
    params: { fast_period: 12, slow_period: 26, signal_period: 9 }
  # ── VWAP Reversion ──
  - name: "vwap_reversion"
    timeframe: "15m"
    params: { period: 20, band_mult: 1.0 }
  - name: "vwap_reversion"
    timeframe: "1h"
    params: { period: 20, band_mult: 1.0 }
  - name: "vwap_reversion"
    timeframe: "4h"
    params: { period: 20, band_mult: 1.0 }
  - name: "vwap_reversion"
    timeframe: "1d"
    params: { period: 20, band_mult: 1.0 }
  # ── EMA Ribbon ──
  - name: "ema_ribbon"
    timeframe: "15m"
    params: { periods: [8, 13, 21, 34] }
  - name: "ema_ribbon"
    timeframe: "1h"
    params: { periods: [8, 13, 21, 34] }
  - name: "ema_ribbon"
    timeframe: "4h"
    params: { periods: [8, 13, 21, 34] }
  - name: "ema_ribbon"
    timeframe: "1d"
    params: { periods: [8, 13, 21, 34] }
  # ── Order Flow（無 K 線時段）──
  - name: "tia_orderflow"
    params: { signal_threshold: 0.5 }

# LLM Decision Engine
llm:
  enabled: true
  cli_path: "claude"
  model: "claude-sonnet-4-5-20250929"
  timeout: 60
  min_confidence: 0.3           # 至少一個策略信心 >= 此值才呼叫 LLM

# Loan Guard（借貸再平衡）
loan_guard:
  enabled: true
  target_ltv: 0.70            # 目標平衡 LTV（>= 此值才 warning）
  danger_ltv: 0.75            # 高於此 → 買入質押物（低買）
  low_ltv: 0.40               # 低於此 → 減少質押賣出（高賣）
  dry_run: false              # true=只告警, false=AI審核通過後實際執行

# Taiwan Index Analysis (analysis-only)
tx:
  enabled: true
  symbol: "^TWII"
  display_name: "TX"
  timeframes: ["15m", "1h", "1d"]

# Logging
logging:
  level: "INFO"
  file_enabled: true
  log_dir: "data/logs"
